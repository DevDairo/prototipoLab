<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intranet Laboratorio SENA - Prototipo</title>
    
    <!-- Tailwind CSS para estilos rápidos y responsivos -->
    <script src="https://cdn.tailwindcss.com"></script>
    

<!-- Script para exportación PDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <!-- Fuentes e Iconos -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
       <link rel="shortcut icon" href="/MEDIA/IMG/LOGOSENA.png" />

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F3F4F6;
        }

        /* ==========================================================================
           ZONA DE LOGOS E IMAGENES
           Si deseas cambiar el logo por una imagen PNG/SVG, busca la clase .logo-container
           y reemplaza el ícono <i class="..."> por tu etiqueta <img>.
           ==========================================================================
        */
        
        .logo-placeholder {
            /* Puedes poner aquí background-image: url('ruta/logo.png'); */
        }

        /* Estilos para el scrollbar personalizado */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }

        /* Animaciones suaves */
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal-enter {
            animation: modalEnter 0.3s ease-out forwards;
        }
        @keyframes modalEnter {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
    </style>
</head>
<body class="text-gray-800 h-screen overflow-hidden">

    <!-- =======================
         PANTALLA DE LOGIN
         ======================= -->
    <div id="login-screen" class="flex h-screen w-full bg-white relative z-50">
        
        <!-- Lado Izquierdo: Imagen Decorativa (Solicitado en el prompt) -->
        <div class="hidden lg:flex lg:w-1/2 bg-gray-1000 relative overflow-hidden">
            <!-- Imagen de referencia de laboratorio -->
            <img src="/MEDIA/IMG/lab_inicio.jpg" 
                 alt="Laboratorio" 
                 class="absolute inset-0 w-full h-full object-cover opacity-100">
            <div class="absolute inset-0 bg-gradient-to-r from-green-900/40 to-transparent"></div>
            
            <div class="absolute bottom-10 left-10 text-white p-6 font-bold ">
                <h2 class="text-4xl mb-2">Innovación y Calidad</h2>
                <p class="text-lg ">Gestión integral de procesos de laboratorio.</p>
            </div>
        </div>

        <!-- Lado Derecho: Formulario -->
        <div class="w-full lg:w-1/2 flex items-center justify-center p-8 bg-white">
            <div class="w-full max-w-md space-y-8">
                <div class="text-center">
                    <!-- LOGO SVG PROVISIONAL -->
                    <div class="mx-auto h-16 w-16 bg-green-100 rounded-full flex items-center justify-center mb-4">
                        <i class="fa-solid fa-flask text-3xl text-green-600"></i>
                    </div>
                    
                    <h2 class="text-3xl font-bold text-gray-900 tracking-tight">Iniciar Sesión</h2>
                    <p class="mt-2 text-sm text-gray-600">
                        Intranet laboratorio SENA - CTPGA
                    </p>
                </div>

                <form class="mt-8 space-y-6" id="login-form">
                    <div class="space-y-4 rounded-md shadow-sm">
                        <div>
                            <label for="username" class="block text-sm font-medium text-gray-700 mb-1">Usuario</label>
                            <input id="username" name="username" type="text" required 
                                class="appearance-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm" 
                                placeholder="Ej: admin">
                        </div>
                        <div>
                            <label for="password" class="block text-sm font-medium text-gray-700 mb-1">Contraseña</label>
                            <input id="password" name="password" type="password" required 
                                class="appearance-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm" 
                                placeholder="••••••••">
                        </div>
                    </div>

                    <div>
                        <button type="submit" 
                            class="group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors">
                            Entrar
                        </button>
                    </div>
                    <div id="login-error" class="text-red-500 text-sm text-center hidden">
                        Usuario o contraseña incorrectos (Usa: admin / admin)
                    </div>
                </form>
                
                <p class="text-center text-xs text-gray-400 mt-10">
                    Prototipo - 2025
                </p>


<!-- BOTÓN NUEVO -->
<div class="flex justify-center mt-4">
    <a href="/HTML/principal.HTML"
       class="px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg shadow-sm hover:bg-green-700 transition">
        Inicio
    </a>
</div>

            </div>
        </div>
    </div>

    <!-- =======================
         DASHBOARD PRINCIPAL (APP)
         ======================= -->
    <div id="app-container" class="hidden h-screen flex bg-gray-50">
        
        <!-- SIDEBAR -->
        <aside class="w-64 bg-white border-r border-gray-200 flex flex-col hidden md:flex transition-all duration-300" id="sidebar">
            <div class="h-16 flex items-center px-6 border-b border-gray-100">
                <!-- LOGO DEL SIDEBAR -->
                <div class="flex items-center gap-3">
                    <div class="h-8 w-8 bg-green-600 rounded-lg flex items-center justify-center text-white">
                        <img src="/MEDIA/IMG/LOGOSENA.png" alt="">
                    </div>
                    <span class="font-bold text-gray-800 text-lg">Laboratorio SENA-CTPGA</span>
                </div>
            </div>

            <div class="p-4 space-y-1 overflow-y-auto flex-1">
                <p class="px-3 text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2">Navegación</p>
                
                <button onclick="router('dashboard')" class="nav-btn w-full flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-green-50 hover:text-green-700 transition-colors bg-green-50 text-green-700" id="nav-dashboard">
                    <i class="fa-solid fa-chart-pie w-5"></i>
                    Metricas
                </button>
                
                <button onclick="router('muestras')" class="nav-btn w-full flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-green-50 hover:text-green-700 transition-colors" id="nav-muestras">
                    <i class="fa-solid fa-flask w-5"></i>
                    Calor / Muestras
                </button>
                
                <button onclick="router('frio')" class="nav-btn w-full flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-green-50 hover:text-green-700 transition-colors" id="nav-frio">
                    <i class="fa-solid fa-temperature-low w-5"></i>
                    Cadena de Frío
                </button>
                
                <button onclick="router('registros')" class="nav-btn w-full flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-green-50 hover:text-green-700 transition-colors" id="nav-registros">
                    <i class="fa-solid fa-clock-rotate-left w-5"></i>
                    Registros / Historial
                </button>
                
                <button onclick="router('ajustes')" class="nav-btn w-full flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-green-50 hover:text-green-700 transition-colors" id="nav-ajustes">
                    <i class="fa-solid fa-gear w-5"></i>
                    Ajustes
                </button>
            </div>

            <div class="p-4 border-t border-gray-100">
                <div class="flex items-center gap-3 mb-4">
                    <div class="h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden">
                        <i class="fa-solid fa-user text-gray-500"></i>
                    </div>
                    <div>
                        <p class="text-sm font-medium text-gray-700">Administrador</p>
                        <p class="text-xs text-gray-500">admin@sena.edu.co</p>
                    </div>
                </div>
                <button onclick="logout()" class="w-full flex items-center gap-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-md transition-colors">
                    <i class="fa-solid fa-arrow-right-from-bracket"></i>
                    Cerrar Sesión
                </button>
            </div>
        </aside>

        <!-- CONTENIDO PRINCIPAL -->
        <main class="flex-1 flex flex-col h-screen overflow-hidden relative">
            
            <!-- HEADER -->
            <header class="h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6 lg:px-8">
                <div class="flex items-center gap-4">
                    <button class="md:hidden text-gray-500 hover:text-gray-700" onclick="document.getElementById('sidebar').classList.toggle('hidden'); document.getElementById('sidebar').classList.toggle('absolute'); document.getElementById('sidebar').classList.toggle('z-50'); document.getElementById('sidebar').classList.toggle('h-full');">
                        <i class="fa-solid fa-bars text-xl"></i>
                    </button>
                    <div class="hidden md:flex items-center text-gray-400 bg-gray-100 rounded-lg px-3 py-1.5 w-64">
                        <i class="fa-solid fa-magnifying-glass text-sm mr-2"></i>
                        <input type="text" placeholder="Buscar registros, tareas..." class="bg-transparent border-none focus:outline-none text-sm w-full text-gray-600">
                    </div>
                </div>
                
                <div class="flex items-center gap-4">
                    <button class="relative p-2 text-gray-400 hover:text-green-600 transition-colors">
                        <i class="fa-regular fa-bell text-xl"></i>
                        <span class="absolute top-1.5 right-1.5 h-2 w-2 bg-red-500 rounded-full border border-white"></span>
                    </button>
                </div>
            </header>

            <!-- ZONA DE CONTENIDO DINAMICO -->
            <div id="main-content" class="flex-1 overflow-y-auto p-6 lg:p-8">
                <!-- El contenido se inyecta aquí con JS -->
            </div>

        </main>
    </div>
<!-- =======================
     MODAL DE FORMULARIO (MEJORADO CON SELECTOR)
     ======================= -->
<div id="form-modal" class="fixed inset-0 z-[100] hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
    <!-- Backdrop -->
    <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity backdrop-blur-sm" onclick="closeFormModal()"></div>

    <div class="fixed inset-0 z-10 overflow-y-auto">
        <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
            <div class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-4xl modal-enter">
                
                <!-- Modal Header -->
                <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4 border-b border-gray-100">
                    <div class="flex justify-between items-center">
                        <h3 class="text-xl font-semibold leading-6 text-gray-900" id="modal-title">Nuevo Registro de Análisis</h3>
                        <button onclick="closeFormModal()" class="text-gray-400 hover:text-gray-500">
                            <i class="fa-solid fa-xmark text-xl"></i>
                        </button>
                    </div>
                    <p class="text-sm text-gray-500 mt-1">Diligencie los datos basados en el formulario de referencia HEAD SOIL SET.</p>
                </div>

                <!-- Modal Body -->
                <form class="p-6 space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Fecha de Muestreo</label>
                            <input type="date" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm border p-2">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Lote de Materiales</label>
                            <input type="text" placeholder="Ej: Lote A-24" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm border p-2">
                        </div>
                    </div>

                    <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                        <h4 class="text-sm font-bold text-gray-700 mb-3 uppercase border-b pb-2">Prueba de Presencia de Residuos</h4>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                            <div>
                                <label class="block text-xs font-medium text-gray-500 uppercase">Cant. Pruebas</label>
                                <input type="number" value="1" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm border p-2">
                            </div>
                            <div class="col-span-2">
                                <label class="block text-xs font-medium text-gray-500 uppercase">Responsable</label>
                                <input type="text" value="Administrador" readonly class="mt-1 block w-full rounded-md border-gray-300 bg-gray-100 text-gray-500 sm:text-sm border p-2 cursor-not-allowed">
                            </div>
                        </div>

                        <div class="mt-4 mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Seleccionar muestra</label>
                            <input type="file" id="folderPicker" webkitdirectory directory multiple class="hidden">
                            <label for="folderPicker" class="inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md shadow-sm hover:bg-green-500 cursor-pointer transition">
                                <i class="fa-solid fa-folder-open text-lg"></i>
                                Elegir Muestra
                            </label>
                        </div>

                        <!-- NUEVO BOTÓN: Seleccionar formulario -->
                        <div class="mt-4">
                            <button type="button" onclick="openFormSelector()" class="inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md shadow-sm hover:bg-blue-500 transition">
                                <i class="fa-solid fa-file-lines text-lg"></i>
                                Seleccionar Formulario Oficial
                            </button>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Resultado del Análisis</label>
                            <div class="flex gap-4">
                                <label class="flex items-center gap-2 cursor-pointer">
                                    <input type="radio" name="result" class="text-green-600 focus:ring-green-500">
                                    <span class="text-sm text-gray-700">Aceptable</span>
                                </label>
                                <label class="flex items-center gap-2 cursor-pointer">
                                    <input type="radio" name="result" class="text-red-600 focus:ring-red-500">
                                    <span class="text-sm text-gray-700">No Aceptable / Residuo Detectado</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700">Observaciones / Novedades</label>
                        <textarea rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm border p-2" placeholder="Ingrese cualquier anomalía observada durante la toma de la muestra..."></textarea>
                    </div>
                </form>

                <!-- Modal Footer -->
                <div class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6 border-t border-gray-100">
                    <button type="button" onclick="saveForm()" class="inline-flex w-full justify-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500 sm:ml-3 sm:w-auto">Guardar Registro</button>
                    <button type="button" onclick="closeFormModal()" class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto">Cancelar</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- =======================
     MODAL SELECTOR DE FORMULARIOS
     ======================= -->
<div id="form-selector-modal" class="fixed inset-0 z-[110] hidden" aria-labelledby="selector-title" role="dialog" aria-modal="true">
    <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity backdrop-blur-sm" onclick="closeFormSelector()"></div>

    <div class="fixed inset-0 z-10 overflow-y-auto">
        <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
            <div class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-5xl modal-enter">
                
                <!-- Header -->
                <div class="bg-white px-6 pt-6 pb-4 border-b border-gray-100">
                    <div class="flex justify-between items-center">
                        <div>
                            <h3 class="text-2xl font-bold text-gray-900" id="selector-title">Seleccionar Formulario Oficial</h3>
                            <p class="text-sm text-gray-500 mt-1">Escoja el formulario que desea llenar y exportar a PDF</p>
                        </div>
                        <button onclick="closeFormSelector()" class="text-gray-400 hover:text-gray-500">
                            <i class="fa-solid fa-xmark text-2xl"></i>
                        </button>
                    </div>
                </div>

                <!-- Body: Grid de tarjetas -->
                <div class="p-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="forms-grid">
                        <!-- Las tarjetas se generan dinámicamente -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- =======================
     MODAL EDITOR DE FORMULARIO
     ======================= -->
<div id="form-editor-modal" class="fixed inset-0 z-[120] hidden" aria-labelledby="editor-title" role="dialog" aria-modal="true">
    <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity backdrop-blur-sm" onclick="closeFormEditor()"></div>

    <div class="fixed inset-0 z-10 overflow-y-auto">
        <div class="flex min-h-full items-center justify-center p-4">
            <div class="relative transform overflow-hidden rounded-lg bg-white shadow-xl transition-all w-full max-w-6xl max-h-[90vh] flex flex-col modal-enter">
                
                <!-- Header -->
                <div class="bg-white px-6 py-4 border-b border-gray-100 flex justify-between items-center flex-shrink-0">
                    <div>
                        <h3 class="text-xl font-bold text-gray-900" id="editor-title">Editor de Formulario</h3>
                        <p class="text-sm text-gray-500">Complete los campos y exporte a PDF</p>
                    </div>
                    <div class="flex items-center gap-3">
                        <button onclick="exportFormToPDF()" class="inline-flex items-center gap-2 px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-md shadow-sm hover:bg-red-700 transition">
                            <i class="fa-solid fa-file-pdf"></i>
                            Exportar a PDF
                        </button>
                        <button onclick="closeFormEditor()" class="text-gray-400 hover:text-gray-500">
                            <i class="fa-solid fa-xmark text-2xl"></i>
                        </button>
                    </div>
                </div>

                <!-- Body: Formulario editable -->
                <div class="flex-1 overflow-y-auto p-6 bg-gray-50">
                    <div class="bg-white rounded-lg shadow-sm p-6">
                        <div id="form-content-container">
                            <!-- El HTML del formulario se carga aquí -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


                         
<div class="mt-4">
    <label class="block text-sm font-medium text-gray-700 mb-2">
        Seleccionar muestra
    </label>

    <!-- Input real (oculto) -->
    <input type="file" 
           id="folderPicker"
           webkitdirectory 
           directory 
           multiple 
           class="hidden">

    <!-- Botón estilizado -->
    <label for="folderPicker"
           class="inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md shadow-sm hover:bg-green-500 cursor-pointer transition">
        <i class="fa-solid fa-folder-open text-lg"></i>
        Elegir Muestra
    </label>
</div>


                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Resultado del Análisis</label>
                                <div class="flex gap-4">
                                    <label class="flex items-center gap-2 cursor-pointer">
                                        <input type="radio" name="result" class="text-green-600 focus:ring-green-500">
                                        <span class="text-sm text-gray-700">Aceptable</span>
                                    </label>
                                    <label class="flex items-center gap-2 cursor-pointer">
                                        <input type="radio" name="result" class="text-red-600 focus:ring-red-500">
                                        <span class="text-sm text-gray-700">No Aceptable / Residuo Detectado</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Sección 3: Observaciones -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Observaciones / Novedades</label>
                            <textarea rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm border p-2" placeholder="Ingrese cualquier anomalía observada durante la toma de la muestra..."></textarea>
                        </div>
                    </form>

                    <!-- Modal Footer -->
                    <div class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6 border-t border-gray-100">
                        <button type="button" onclick="saveForm()" class="inline-flex w-full justify-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500 sm:ml-3 sm:w-auto">Guardar Registro</button>
                        <button type="button" onclick="closeModal()" class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto">Cancelar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script>

// ==========================================
// SISTEMA DE FORMULARIOS - BASE DE DATOS
// ==========================================

const formulariosDB = {
    'novedades-equipos': {
        nombre: 'Novedades de Equipos',
        descripcion: 'Registro de novedades y reportes de equipos del laboratorio',
        icono: 'fa-clipboard-list',
        color: 'blue',
        html: `
<style>
    .form-container-oficial { font-family: Arial, sans-serif; font-size: 12px; max-width: 100%; }
    .form-container-oficial table { width: 100%; border-collapse: collapse; margin-bottom: 15px; }
    .form-container-oficial table, .form-container-oficial th, .form-container-oficial td { border: 1px solid #000; }
    .form-container-oficial th, .form-container-oficial td { padding: 8px; text-align: left; }
    .form-container-oficial th { background-color: #f0f0f0; font-weight: bold; }
    .form-container-oficial input[type="text"], .form-container-oficial input[type="date"], .form-container-oficial textarea { 
        width: 95%; border: none; background: transparent; font-size: 11px; padding: 4px; 
    }
    .form-container-oficial input[type="text"]:focus, .form-container-oficial textarea:focus { 
        outline: 1px solid #4CAF50; background: #f9fff9; 
    }
    .form-container-oficial .header-logo { width: 70px; }
    .form-container-oficial .center-text { text-align: center; font-weight: bold; }
</style>

<div class="form-container-oficial">
    <table>
        <tr>
            <td rowspan="2" width="15%" class="center-text">
                <div style="width:70px; height:70px; background:#4CAF50; margin:0 auto; border-radius:8px; display:flex; align-items:center; justify-content:center; color:white; font-weight:bold;">LOGO</div>
            </td>
            <td rowspan="2" width="55%" class="center-text">
                LABORATORIO DE SERVICIOS AMBIENTALES Y AGROPECUARIOS CTPGA
            </td>
            <td width="15%">Código</td>
            <td width="15%">FT-EQ-006</td>
        </tr>
        <tr>
            <td>Fecha de Emisión</td>
            <td>2023-02-24</td>
        </tr>
        <tr>
            <td colspan="3" class="center-text">NOVEDADES DE EQUIPOS</td>
            <td>Página 1 de 1</td>
        </tr>
    </table>

    <table>
        <tr>
            <td width="25%"><b>EQUIPO:</b></td>
            <td width="25%"><b>MARCA / MODELO:</b></td>
            <td width="25%"><b>CÓDIGO INTERNO:</b></td>
            <td width="25%"><b>REVISIÓN:</b></td>
        </tr>
        <tr>
            <td><input type="text" placeholder="Nombre del equipo"></td>
            <td><input type="text" placeholder="Marca y modelo"></td>
            <td><input type="text" placeholder="Código"></td>
            <td><input type="text" placeholder="Revisión"></td>
        </tr>
    </table>

    <table>
        <tr>
            <td width="15%"><b>FECHA</b></td>
            <td width="70%"><b>REPORTE O NOVEDAD</b></td>
            <td width="15%"><b>FIRMA</b></td>
        </tr>
        <tr><td><input type="date"></td><td><input type="text" placeholder="Descripción de la novedad"></td><td><input type="text" placeholder="Firma"></td></tr>
        <tr><td><input type="date"></td><td><input type="text"></td><td><input type="text"></td></tr>
        <tr><td><input type="date"></td><td><input type="text"></td><td><input type="text"></td></tr>
        <tr><td><input type="date"></td><td><input type="text"></td><td><input type="text"></td></tr>
        <tr><td><input type="date"></td><td><input type="text"></td><td><input type="text"></td></tr>
        <tr><td><input type="date"></td><td><input type="text"></td><td><input type="text"></td></tr>
        <tr><td><input type="date"></td><td><input type="text"></td><td><input type="text"></td></tr>
        <tr><td><input type="date"></td><td><input type="text"></td><td><input type="text"></td></tr>
    </table>

    <table>
        <tr>
            <td width="33%" class="center-text">
                <b>ELABORÓ</b><br><br>
                <input type="text" placeholder="Nombre" style="width:80%; border-bottom:1px solid #000;"><br>
                Fecha: <input type="date" style="width:60%;">
            </td>
            <td width="33%" class="center-text">
                <b>REVISÓ</b><br><br>
                <input type="text" placeholder="Nombre" style="width:80%; border-bottom:1px solid #000;"><br>
                Fecha: <input type="date" style="width:60%;">
            </td>
            <td width="33%" class="center-text">
                <b>APROBÓ</b><br><br>
                <input type="text" placeholder="Nombre" style="width:80%; border-bottom:1px solid #000;"><br>
                Fecha: <input type="date" style="width:60%;">
            </td>
        </tr>
    </table>
</div>
        `
    },
    
    'registro-uso-equipo': {
        nombre: 'Registro de Uso de Equipo',
        descripcion: 'Control de uso y seguimiento de equipos del laboratorio',
        icono: 'fa-tools',
        color: 'green',
        html: `
<style>
    .form-container-oficial { font-family: Arial, sans-serif; font-size: 11px; max-width: 100%; }
    .form-container-oficial table { width: 100%; border-collapse: collapse; margin-bottom: 15px; }
    .form-container-oficial table, .form-container-oficial th, .form-container-oficial td { border: 1px solid #000; }
    .form-container-oficial th, .form-container-oficial td { padding: 6px; text-align: left; }
    .form-container-oficial th { background-color: #f0f0f0; font-weight: bold; font-size: 10px; }
    .form-container-oficial input[type="text"], .form-container-oficial input[type="date"], 
    .form-container-oficial input[type="time"], .form-container-oficial textarea { 
        width: 95%; border: none; background: transparent; font-size: 10px; padding: 3px; 
    }
    .form-container-oficial input:focus, .form-container-oficial textarea:focus { 
        outline: 1px solid #4CAF50; background: #f9fff9; 
    }
    .form-container-oficial .center-text { text-align: center; font-weight: bold; }
    .form-container-oficial .header-table { margin-left: auto; width: 300px; font-size: 10px; }
</style>

<div class="form-container-oficial">
    <div class="center-text" style="margin-bottom:10px;">
        <p><strong>LABORATORIO DE SERVICIOS AMBIENTALES Y AGROPECUARIOS CTPGA</strong></p>
        <p><strong>REGISTRO DE USO DE EQUIPO</strong></p>
    </div>

    <div style="display: flex; justify-content: flex-end; margin-bottom: 10px;">
        <table class="header-table">
            <tr>
                <td style="width: 40%;"><label>Código Equipo:</label></td>
                <td><input type="text" placeholder="EJ-057"></td>
            </tr>
            <tr>
                <td><label>Fecha de Edición:</label></td>
                <td><input type="date"></td>
            </tr>
            <tr>
                <td><label>Revisión:</label></td>
                <td><input type="text" placeholder="Rev. 01"></td>
            </tr>
        </table>
    </div>

    <table>
        <thead>
            <tr>
                <th rowspan="2" style="width: 8%;">EQUIPO</th>
                <th rowspan="2" style="width: 10%;">Responsable</th>
                <th rowspan="2" style="width: 10%;">Marca</th>
                <th rowspan="2" style="width: 18%;">Descripción</th>
                <th rowspan="2" style="width: 10%;">Código</th>
                <th colspan="2" style="width: 15%;">Uso</th>
                <th rowspan="2" style="width: 10%;">Patrón</th>
                <th rowspan="2" style="width: 19%;">Observación</th>
            </tr>
            <tr>
                <th style="width: 7.5%;">Inicio</th>
                <th style="width: 7.5%;">Término</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><input type="text" placeholder="UFC"></td>
                <td><input type="text" placeholder="Nombre"></td>
                <td><input type="text" placeholder="IKA"></td>
                <td><input type="text" placeholder="Agitación"></td>
                <td><input type="text" placeholder="2.90"></td>
                <td><input type="time"></td>
                <td><input type="time"></td>
                <td><input type="text" placeholder="Nitrato"></td>
                <td><input type="text" placeholder="Buen estado"></td>
            </tr>
            <tr>
                <td><input type="text"></td>
                <td><input type="text"></td>
                <td><input type="text"></td>
                <td><input type="text"></td>
                <td><input type="text"></td>
                <td><input type="time"></td>
                <td><input type="time"></td>
                <td><input type="text"></td>
                <td><input type="text"></td>
            </tr>
            <tr>
                <td><input type="text"></td>
                <td><input type="text"></td>
                <td><input type="text"></td>
                <td><input type="text"></td>
                <td><input type="text"></td>
                <td><input type="time"></td>
                <td><input type="time"></td>
                <td><input type="text"></td>
                <td><input type="text"></td>
            </tr>
        </tbody>
    </table>

    <table>
        <thead>
            <tr>
                <th>OBSERVACIONES</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    <textarea rows="4" placeholder="Escriba aquí cualquier observación relevante..." style="width: 99%; padding: 5px;"></textarea>
                </td>
            </tr>
        </tbody>
    </table>

    <table>
        <thead>
            <tr>
                <th style="width: 33%;">Elaboró</th>
                <th style="width: 33%;">Revisó</th>
                <th style="width: 34%;">Aprobó</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="height: 80px; vertical-align: top;" class="center-text">
                    <p style="margin: 5px 0;">Nombre y Firma:</p>
                    <input type="text" style="width: 90%; border-bottom: 1px solid #000; margin: 10px 0;">
                    <p style="margin: 5px 0;">Fecha:</p>
                    <input type="date" style="width: 70%;">
                </td>
                <td style="height: 80px; vertical-align: top;" class="center-text">
                    <p style="margin: 5px 0;">Nombre y Firma:</p>
                    <input type="text" style="width: 90%; border-bottom: 1px solid #000; margin: 10px 0;">
                    <p style="margin: 5px 0;">Fecha:</p>
                    <input type="date" style="width: 70%;">
                </td>
                <td style="height: 80px; vertical-align: top;" class="center-text">
                    <p style="margin: 5px 0;">Nombre y Firma:</p>
                    <input type="text" style="width: 90%; border-bottom: 1px solid #000; margin: 10px 0;">
                    <p style="margin: 5px 0;">Fecha:</p>
                    <input type="date" style="width: 70%;">
                </td>
            </tr>
        </tbody>
    </table>
</div>
        `
    }
};

// ==========================================
// FUNCIONES DE GESTIÓN DE MODALES
// ==========================================

// Renombrar función original para evitar conflictos
function closeFormModal() {
    document.getElementById('form-modal').classList.add('hidden');
}

function openFormSelector() {
    // Generar tarjetas de formularios
    const grid = document.getElementById('forms-grid');
    grid.innerHTML = '';
    
    Object.keys(formulariosDB).forEach(key => {
        const form = formulariosDB[key];
        const colorClasses = {
            'blue': 'bg-blue-50 text-blue-600 hover:bg-blue-100',
            'green': 'bg-green-50 text-green-600 hover:bg-green-100',
            'orange': 'bg-orange-50 text-orange-600 hover:bg-orange-100',
            'purple': 'bg-purple-50 text-purple-600 hover:bg-purple-100'
        };
        
        const card = document.createElement('div');
        card.className = 'bg-white rounded-xl shadow-sm border-2 border-gray-200 p-6 hover:shadow-md hover:border-green-500 transition-all cursor-pointer group';
        card.onclick = () => loadFormEditor(key);
        
        card.innerHTML = `
            <div class="flex flex-col items-center text-center">
                <div class="h-16 w-16 ${colorClasses[form.color]} rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                    <i class="fa-solid ${form.icono} text-2xl"></i>
                </div>
                <h4 class="font-bold text-gray-800 mb-2">${form.nombre}</h4>
                <p class="text-xs text-gray-500">${form.descripcion}</p>
                <div class="mt-4 pt-4 border-t border-gray-100 w-full flex justify-center">
                    <span class="text-xs text-green-600 font-medium group-hover:underline">
                        Seleccionar <i class="fa-solid fa-arrow-right ml-1"></i>
                    </span>
                </div>
            </div>
        `;
        
        grid.appendChild(card);
    });
    
    document.getElementById('form-selector-modal').classList.remove('hidden');
}

function closeFormSelector() {
    document.getElementById('form-selector-modal').classList.add('hidden');
}

function loadFormEditor(formKey) {
    const form = formulariosDB[formKey];
    if (!form) return;
    
    // Actualizar título
    document.getElementById('editor-title').innerHTML = `
        <i class="fa-solid ${form.icono} mr-2"></i>${form.nombre}
    `;
    
    // Cargar HTML del formulario
    document.getElementById('form-content-container ').innerHTML = form.html; // Cerrar selector y abrir editor
closeFormSelector();
document.getElementById('form-editor-modal').classList.remove('hidden'); }
function closeFormEditor() {
document.getElementById('form-editor-modal').classList.add('hidden');
}
// ==========================================
// FUNCIÓN DE EXPORTACIÓN A PDF
// ==========================================
function exportFormToPDF() {
const content = document.getElementById('form-content-container'); // Mostrar indicador de carga
const btn = event.target.closest('button');
const originalHTML = btn.innerHTML;
btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin mr-2"></i>Generando PDF...';
btn.disabled = true;

// Configuración de html2pdf
const options = {
    margin: [10, 10, 10, 10],
    filename: `formulario_${Date.now()}.pdf`,
    image: { type: 'jpeg', quality: 0.98 },
    html2canvas: { 
        scale: 2,
        useCORS: true,
        letterRendering: true,
        logging: false
    },
    jsPDF: { 
        unit: 'mm', 
        format: 'a4', 
        orientation: 'portrait',
        compress: true
    }
};

// Generar PDF
html2pdf()
    .set(options)
    .from(content)
    .save()
    .then(() => {
        btn.innerHTML = originalHTML;
        btn.disabled = false;
        
        // Mostrar notificación de éxito
        const notification = document.createElement('div');
        notification.className = 'fixed top-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg z-[200] fade-in';
        notification.innerHTML = '<i class="fa-solid fa-check-circle mr-2"></i>PDF generado exitosamente';
        document.body.appendChild(notification);
        
        setTimeout(() => {
            notification.remove();
        }, 3000);
    })
    .catch(error => {
        console.error('Error al generar PDF:', error);
        btn.innerHTML = originalHTML;
        btn.disabled = false;
        alert('Error al generar el PDF. Por favor intente nuevamente.');
    }); } 




















        // --- LOGICA DE LOGIN ---
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const user = document.getElementById('username').value;
            const pass = document.getElementById('password').value;
            
            // Credenciales simples como solicitado
            if(user === 'admin' && pass === 'admin') {
                document.getElementById('login-screen').classList.add('hidden');
                document.getElementById('app-container').classList.remove('hidden');
                renderDashboard(); // Cargar dashboard por defecto
            } else {
                document.getElementById('login-error').classList.remove('hidden');
            }
        });

        function logout() {
            document.getElementById('app-container').classList.add('hidden');
            document.getElementById('login-screen').classList.remove('hidden');
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            document.getElementById('login-error').classList.add('hidden');
        }

        // --- SISTEMA DE RUTAS (SPA Simple) ---
        function router(page) {
            // Actualizar botones del sidebar
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('bg-green-50', 'text-green-700');
                btn.classList.add('text-gray-600');
            });
            
            const activeBtn = document.getElementById(`nav-${page}`);
            if(activeBtn) {
                activeBtn.classList.add('bg-green-50', 'text-green-700');
                activeBtn.classList.remove('text-gray-600');
            }

            // Renderizar contenido
            const content = document.getElementById('main-content');
            content.innerHTML = ''; // Limpiar
            content.classList.remove('fade-in');
            void content.offsetWidth; // Trigger reflow
            content.classList.add('fade-in');

            switch(page) {
                case 'dashboard': renderDashboard(); break;
                case 'muestras': renderMuestras(); break;
                case 'frio': renderFrio(); break;
                case 'registros': renderRegistros(); break;
                case 'ajustes': renderAjustes(); break;
            }
        }

        // --- RENDERIZADORES DE VISTAS ---

        function renderDashboard() {
            const html = `
                <div class="mb-8">
                    <h2 class="text-2xl font-bold text-gray-800">Metricas</h2>
                    <p class="text-gray-500">Panel de control general del laboratorio</p>
                </div>

                <!-- Tarjetas Métricas -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <!-- Card 1 -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-500">Muestras del Día</p>
                            <p class="text-3xl font-bold text-gray-800 mt-1">24</p>
                            <span class="text-xs text-green-600 font-medium">+12% vs ayer</span>
                        </div>
                        <div class="h-12 w-12 bg-indigo-50 rounded-lg flex items-center justify-center text-indigo-600">
                            <i class="fa-solid fa-flask"></i>
                        </div>
                    </div>
                    <!-- Card 2 -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-500">Pendientes</p>
                            <p class="text-3xl font-bold text-gray-800 mt-1">8</p>
                            <span class="text-xs text-orange-500 font-medium">Prioridad alta</span>
                        </div>
                        <div class="h-12 w-12 bg-orange-50 rounded-lg flex items-center justify-center text-orange-600">
                            <i class="fa-solid fa-triangle-exclamation"></i>
                        </div>
                    </div>
                    <!-- Card 3 -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-500">Temp. Promedio</p>
                            <p class="text-3xl font-bold text-gray-800 mt-1">4.5°C</p>
                            <span class="text-xs text-green-600 font-medium">Estable</span>
                        </div>
                        <div class="h-12 w-12 bg-blue-50 rounded-lg flex items-center justify-center text-blue-600">
                            <i class="fa-solid fa-temperature-half"></i>
                        </div>
                    </div>
                    <!-- Card 4 -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-500">Completados Hoy</p>
                            <p class="text-3xl font-bold text-gray-800 mt-1">16</p>
                            <span class="text-xs text-gray-400">97% efectividad</span>
                        </div>
                        <div class="h-12 w-12 bg-green-50 rounded-lg flex items-center justify-center text-green-600">
                            <i class="fa-regular fa-circle-check"></i>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Tareas del Día -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 lg:col-span-1">
                        <h3 class="font-bold text-gray-800 mb-4">Tareas del Día</h3>
                        <div class="space-y-4">
                            <div class="flex items-start gap-3 p-3 hover:bg-gray-50 rounded-lg transition-colors cursor-pointer border-l-4 border-red-400 bg-white shadow-sm">
                                <input type="checkbox" class="mt-1 rounded text-green-600 focus:ring-green-500">
                                <div>
                                    <p class="text-sm font-semibold text-gray-800">Verificar temperatura cámara #3</p>
                                    <p class="text-xs text-gray-500">08:00 AM - Pendiente</p>
                                </div>
                                <span class="ml-auto text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full">Alta</span>
                            </div>
                            <div class="flex items-start gap-3 p-3 hover:bg-gray-50 rounded-lg transition-colors cursor-pointer border-l-4 border-red-400 bg-white shadow-sm">
                                <input type="checkbox" class="mt-1 rounded text-green-600 focus:ring-green-500">
                                <div>
                                    <p class="text-sm font-semibold text-gray-800">Registrar muestras de suelo Lote A</p>
                                    <p class="text-xs text-gray-500">09:30 AM</p>
                                </div>
                                <span class="ml-auto text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full">Alta</span>
                            </div>
                            <div class="flex items-start gap-3 p-3 hover:bg-gray-50 rounded-lg transition-colors cursor-pointer border-l-4 border-blue-400 bg-white shadow-sm">
                                <input type="checkbox" class="mt-1 rounded text-green-600 focus:ring-green-500">
                                <div>
                                    <p class="text-sm font-semibold text-gray-800">Calibración equipos de pH</p>
                                    <p class="text-xs text-gray-500">11:00 AM</p>
                                </div>
                                <span class="ml-auto text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full">Media</span>
                            </div>
                        </div>
                    </div>

                    <!-- Métricas Rápidas -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 lg:col-span-2">
                        <h3 class="font-bold text-gray-800 mb-4">Métricas Rápidas - Temperatura</h3>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm text-left text-gray-500">
                                <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                                    <tr>
                                        <th class="px-4 py-3 rounded-l-lg">Área</th>
                                        <th class="px-4 py-3">Temperatura</th>
                                        <th class="px-4 py-3">Estado</th>
                                        <th class="px-4 py-3 rounded-r-lg text-right">Hora</th>
                                    </tr>
                                </thead>
                                <tbody class="space-y-2">
                                    <tr class="bg-white border-b hover:bg-gray-50">
                                        <td class="px-4 py-3 font-medium text-gray-900">Cámara #1</td>
                                        <td class="px-4 py-3">4.2°C</td>
                                        <td class="px-4 py-3"><span class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded">Normal</span></td>
                                        <td class="px-4 py-3 text-right">10:30</td>
                                    </tr>
                                    <tr class="bg-white border-b hover:bg-gray-50">
                                        <td class="px-4 py-3 font-medium text-gray-900">Cámara #2</td>
                                        <td class="px-4 py-3">4.5°C</td>
                                        <td class="px-4 py-3"><span class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded">Normal</span></td>
                                        <td class="px-4 py-3 text-right">10:30</td>
                                    </tr>
                                    <tr class="bg-white border-b hover:bg-gray-50">
                                        <td class="px-4 py-3 font-medium text-gray-900">Cámara #3</td>
                                        <td class="px-4 py-3 text-red-600 font-bold">9.1°C</td>
                                        <td class="px-4 py-3"><span class="bg-red-100 text-red-800 text-xs font-medium px-2.5 py-0.5 rounded">Alerta</span></td>
                                        <td class="px-4 py-3 text-right">10:25</td>
                                    </tr>
                                    <tr class="bg-white hover:bg-gray-50">
                                        <td class="px-4 py-3 font-medium text-gray-900">Lab. Principal</td>
                                        <td class="px-4 py-3">22.1°C</td>
                                        <td class="px-4 py-3"><span class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded">Normal</span></td>
                                        <td class="px-4 py-3 text-right">10:30</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            `;
            document.getElementById('main-content').innerHTML = html;
        }

        function renderMuestras() {
            const html = `
                <div class="flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800">Calor / Muestras de Tierra</h2>
                        <p class="text-gray-500">Formularios de análisis de muestras de suelo y temperatura.</p>
                    </div>
                    <button onclick="openModal()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors shadow-sm flex items-center gap-2">
                        <i class="fa-solid fa-plus"></i> Crear Nuevo
                    </button>
                </div>

                <!-- Buscador de sección -->
                <div class="flex items-center gap-4 mb-6 bg-white p-2 rounded-lg border border-gray-200 shadow-sm max-w-2xl">
                    <i class="fa-solid fa-filter text-gray-400 pl-2"></i>
                    <input type="text" placeholder="Buscar por operador, fecha o lote..." class="flex-1 outline-none text-sm text-gray-600">
                    <select class="text-sm border-none outline-none text-gray-500 bg-transparent">
                        <option>Todos</option>
                        <option>Pendientes</option>
                        <option>Completados</option>
                    </select>
                    <button class="bg-gray-100 hover:bg-gray-200 text-gray-600 px-3 py-1 rounded text-sm transition-colors">Buscar</button>
                </div>

                <!-- Grid de Formularios (Estilo Documento) -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    
                    ${generateDocCard('Registro de Muestra de Suelo', 2, 'head-soil')}
                    ${generateDocCard('Análisis de pH', 2, 'ph')}
                    ${generateDocCard('Control de Temperatura', 2, 'temp')}
                    ${generateDocCard('Muestreo Lote C-10', 1, 'soil')}
                    
                </div>

                <div class="mt-10">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">Registros Recientes</h3>
                    <div class="bg-white rounded-xl shadow-sm border border-gray-100 divide-y divide-gray-100">
                        ${generateListRow('2024-01-15', 'Juan Perez', 'Completado')}
                        ${generateListRow('2024-01-15', 'Maria Garcia', 'Pendiente')}
                        ${generateListRow('2024-01-14', 'Carlos Lopez', 'Completado')}
                    </div>
                </div>
            `;
            document.getElementById('main-content').innerHTML = html;
        }

        function renderFrio() {
            const html = `
                <div class="flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800">Cadena de Frío</h2>
                        <p class="text-gray-500">Formularios de monitoreo y control de temperatura.</p>
                    </div>
                    <button onclick="openModal()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors shadow-sm flex items-center gap-2">
                        <i class="fa-solid fa-plus"></i> Nuevo Registro
                    </button>
                </div>

                 <!-- Buscador de sección -->
                <div class="flex items-center gap-4 mb-6 bg-white p-2 rounded-lg border border-gray-200 shadow-sm max-w-2xl">
                    <i class="fa-solid fa-snowflake text-blue-400 pl-2"></i>
                    <input type="text" placeholder="Buscar por cámara, producto..." class="flex-1 outline-none text-sm text-gray-600">
                    <button class="bg-gray-100 hover:bg-gray-200 text-gray-600 px-3 py-1 rounded text-sm transition-colors">Buscar</button>
                </div>

                <!-- Grid de Formularios -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    ${generateColdCard('Monitoreo de Temperatura', 'Monitorización cámaras 1-4', 'fa-temperature-arrow-down')}
                    ${generateColdCard('Registro de Productos', 'Entrada y salida de biológicos', 'fa-box-open')}
                    ${generateColdCard('Reporte de Incidente', 'Fallas eléctricas o térmicas', 'fa-triangle-exclamation', true)}
                </div>

                <div class="mt-10">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">Actividad Reciente</h3>
                    <div class="bg-white rounded-xl shadow-sm border border-gray-100 divide-y divide-gray-100">
                         ${generateListRow('2024-01-15', 'Ana Martinez', 'Completado')}
                         ${generateListRow('2024-01-14', 'Luis Rodriguez', 'Completado')}
                    </div>
                </div>
            `;
            document.getElementById('main-content').innerHTML = html;
        }

        function renderRegistros() {
            const html = `
                <div class="mb-8">
                    <h2 class="text-2xl font-bold text-gray-800">Registros / Historial</h2>
                    <p class="text-gray-500">Gestión completa de registros del laboratorio.</p>
                </div>

                <!-- Tabla -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
                    <div class="p-4 border-b border-gray-200 flex flex-col md:flex-row gap-4 justify-between items-center bg-gray-50">
                        <div class="relative w-full md:w-96">
                             <i class="fa-solid fa-search absolute left-3 top-3 text-gray-400 text-xs"></i>
                             <input type="text" placeholder="Buscar por tipo, responsable, área..." class="w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-green-500">
                        </div>
                        <div class="flex gap-2">
                             <select class="text-sm border-gray-300 rounded-lg p-2 text-gray-600 outline-none border bg-white">
                                <option>Todos</option>
                                <option>Ultima Semana</option>
                                <option>Ultimo Mes</option>
                             </select>
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm text-left text-gray-500">
                            <thead class="text-xs text-gray-700 uppercase bg-gray-50 border-b">
                                <tr>
                                    <th class="p-4 w-4"><input type="checkbox" class="rounded text-green-600 focus:ring-green-500"></th>
                                    <th class="px-6 py-3">ID</th>
                                    <th class="px-6 py-3">Fecha y Hora</th>
                                    <th class="px-6 py-3">Tipo</th>
                                    <th class="px-6 py-3">Área</th>
                                    <th class="px-6 py-3">Responsable</th>
                                    <th class="px-6 py-3">Estado</th>
                                    <th class="px-6 py-3 text-right">Acciones</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100">
                                <tr class="bg-white hover:bg-gray-50 transition-colors">
                                    <td class="p-4"><input type="checkbox" class="rounded text-green-600"></td>
                                    <td class="px-6 py-4 font-medium text-gray-900">#001</td>
                                    <td class="px-6 py-4">2024-01-15 10:30</td>
                                    <td class="px-6 py-4">Muestra de Suelo</td>
                                    <td class="px-6 py-4">Calor / Tierra</td>
                                    <td class="px-6 py-4">Juan Perez</td>
                                    <td class="px-6 py-4"><span class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded">Completado</span></td>
                                    <td class="px-6 py-4 text-right space-x-2">
                                        <button class="text-gray-400 hover:text-blue-600"><i class="fa-regular fa-eye"></i></button>
                                        <button class="text-gray-400 hover:text-green-600"><i class="fa-regular fa-pen-to-square"></i></button>
                                        <button class="text-gray-400 hover:text-red-600"><i class="fa-regular fa-trash-can"></i></button>
                                    </td>
                                </tr>
                                <tr class="bg-white hover:bg-gray-50 transition-colors">
                                    <td class="p-4"><input type="checkbox" class="rounded text-green-600"></td>
                                    <td class="px-6 py-4 font-medium text-gray-900">#002</td>
                                    <td class="px-6 py-4">2024-01-15 09:15</td>
                                    <td class="px-6 py-4">Monitoreo Temp.</td>
                                    <td class="px-6 py-4">Cadena de Frío</td>
                                    <td class="px-6 py-4">Maria Garcia</td>
                                    <td class="px-6 py-4"><span class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded">Completado</span></td>
                                    <td class="px-6 py-4 text-right space-x-2">
                                        <button class="text-gray-400 hover:text-blue-600"><i class="fa-regular fa-eye"></i></button>
                                        <button class="text-gray-400 hover:text-green-600"><i class="fa-regular fa-pen-to-square"></i></button>
                                        <button class="text-gray-400 hover:text-red-600"><i class="fa-regular fa-trash-can"></i></button>
                                    </td>
                                </tr>
                                <tr class="bg-gray-50/50 hover:bg-gray-50 transition-colors">
                                    <td class="p-4"><input type="checkbox" class="rounded text-green-600"></td>
                                    <td class="px-6 py-4 font-medium text-gray-900">#003</td>
                                    <td class="px-6 py-4">2024-01-15 08:00</td>
                                    <td class="px-6 py-4">Análisis pH</td>
                                    <td class="px-6 py-4">Calor / Tierra</td>
                                    <td class="px-6 py-4">Carlos Lopez</td>
                                    <td class="px-6 py-4"><span class="bg-gray-100 text-gray-800 text-xs font-medium px-2.5 py-0.5 rounded">Borrador</span></td>
                                    <td class="px-6 py-4 text-right space-x-2">
                                        <button class="text-gray-400 hover:text-blue-600"><i class="fa-regular fa-eye"></i></button>
                                        <button class="text-gray-400 hover:text-green-600"><i class="fa-regular fa-pen-to-square"></i></button>
                                        <button class="text-gray-400 hover:text-red-600"><i class="fa-regular fa-trash-can"></i></button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
            document.getElementById('main-content').innerHTML = html;
        }

        function renderAjustes() {
            const html = `
                <div class="mb-8">
                    <h2 class="text-2xl font-bold text-gray-800">Ajustes</h2>
                    <p class="text-gray-500">Configuración general del sistema y perfil.</p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    
                    <!-- Perfil -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                        <h3 class="text-lg font-bold text-gray-800 mb-6 pb-2 border-b">Perfil de Usuario</h3>
                        <div class="space-y-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Nombre</label>
                                    <input type="text" value="Administrador" class="w-full border-gray-300 rounded-lg p-2 text-sm text-gray-600 border bg-gray-50">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Correo Electrónico</label>
                                    <input type="text" value="admin@sena.edu.co" class="w-full border-gray-300 rounded-lg p-2 text-sm text-gray-600 border bg-gray-50">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Rol</label>
                                    <input type="text" value="Administrador" disabled class="w-full border-gray-300 rounded-lg p-2 text-sm text-gray-400 border bg-gray-100 cursor-not-allowed">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Departamento</label>
                                    <input type="text" value="Laboratorio" class="w-full border-gray-300 rounded-lg p-2 text-sm text-gray-600 border bg-gray-50">
                                </div>
                            </div>
                            <div class="pt-4">
                                <button class="bg-green-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-green-700 transition-colors">Guardar Cambios</button>
                            </div>
                        </div>
                    </div>

                    <!-- Notificaciones -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                        <h3 class="text-lg font-bold text-gray-800 mb-6 pb-2 border-b">Notificaciones</h3>
                        <div class="space-y-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-900">Alertas de temperatura</p>
                                    <p class="text-xs text-gray-500">Recibir notificación cuando salga del rango.</p>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" checked class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"></div>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-900">Recordatorios de tareas</p>
                                    <p class="text-xs text-gray-500">Notificaciones de tareas pendientes diarias.</p>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" checked class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"></div>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-900">Reportes Semanales</p>
                                    <p class="text-xs text-gray-500">Resumen por correo los viernes.</p>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"></div>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Sistema -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 lg:col-span-2">
                        <h3 class="text-lg font-bold text-gray-800 mb-6 pb-2 border-b">Sistema</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Temp. Mínima (°C)</label>
                                <input type="number" value="2" class="w-full border-gray-300 rounded-lg p-2 text-sm text-gray-600 border">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Temp. Máxima (°C)</label>
                                <input type="number" value="8" class="w-full border-gray-300 rounded-lg p-2 text-sm text-gray-600 border">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Retención Registros (Días)</label>
                                <input type="number" value="365" class="w-full border-gray-300 rounded-lg p-2 text-sm text-gray-600 border">
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.getElementById('main-content').innerHTML = html;
        }

        // --- COMPONENTES AUXILIARES ---

        function generateDocCard(title, count, type) {
            // Simulando la vista previa de un documento con CSS puro
            return `
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow cursor-pointer group" onclick="openModal()">
                <div class="h-48 bg-gray-100 relative p-4 flex justify-center items-center overflow-hidden">
                    <!-- Representación visual del documento (Miniatura) -->
                    <div class="w-32 h-40 bg-white shadow-sm border border-gray-200 transform group-hover:scale-105 transition-transform duration-300 flex flex-col p-2">
                         <div class="h-2 w-16 bg-gray-200 mb-2"></div>
                         <div class="h-1 w-full bg-gray-100 mb-1"></div>
                         <div class="h-1 w-full bg-gray-100 mb-1"></div>
                         <div class="h-1 w-2/3 bg-gray-100 mb-3"></div>
                         
                         <!-- Tabla simulada -->
                         <div class="border border-gray-100 grid grid-cols-2 gap-px bg-gray-100 flex-1">
                            <div class="bg-white"></div><div class="bg-white"></div>
                            <div class="bg-white"></div><div class="bg-white"></div>
                            <div class="bg-white"></div><div class="bg-white"></div>
                            <div class="bg-green-50 col-span-2"></div>
                         </div>
                    </div>
                </div>
                <div class="p-4">
                    <h4 class="font-semibold text-gray-800 text-sm mb-1">${title}</h4>
                    <p class="text-xs text-gray-500 flex items-center gap-1">
                        <i class="fa-regular fa-file-lines"></i> ${count} completados
                    </p>
                </div>
            </div>
            `;
        }

        function generateColdCard(title, subtitle, icon, isAlert = false) {
            const iconColor = isAlert ? 'text-red-500 bg-red-50' : 'text-blue-500 bg-blue-50';
            return `
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer flex flex-col items-center text-center group" onclick="openModal()">
                <div class="h-16 w-16 ${iconColor} rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                    <i class="fa-solid ${icon} text-2xl"></i>
                </div>
                <h4 class="font-bold text-gray-800 mb-1">${title}</h4>
                <p class="text-xs text-gray-500">${subtitle}</p>
                <div class="mt-4 pt-4 border-t border-gray-50 w-full flex justify-between items-center text-xs text-gray-400">
                    <span>2 completados</span>
                    <i class="fa-solid fa-chevron-right"></i>
                </div>
            </div>
            `;
        }

        function generateListRow(date, user, status) {
            let statusClass = status === 'Completado' ? 'text-green-600 bg-green-50' : 'text-gray-600 bg-gray-100';
            if (status === 'Pendiente') statusClass = 'text-orange-600 bg-orange-50';

            return `
            <div class="p-4 flex items-center justify-between hover:bg-gray-50 transition-colors">
                <div class="flex items-center gap-4">
                    <div class="h-10 w-10 bg-gray-100 rounded-lg flex items-center justify-center text-gray-500">
                        <i class="fa-regular fa-file-lines"></i>
                    </div>
                    <div>
                        <p class="text-sm font-semibold text-gray-800">${date}</p>
                        <p class="text-xs text-gray-500">${user}</p>
                    </div>
                </div>
                <span class="text-xs font-medium px-2.5 py-0.5 rounded ${statusClass}">${status}</span>
            </div>
            `;
        }

        // --- MANEJO DE MODALES ---
      function openModal() {
    document.getElementById('form-modal').classList.remove('hidden');
}

        function closeModal() {
            document.getElementById('form-modal').classList.add('hidden');
        }

        
     function saveForm() {
    const btn = document.querySelector('#form-modal button[onclick="saveForm()"]');
    const originalText = btn.innerText;
    
    btn.innerText = 'Guardando...';
    btn.classList.add('opacity-75');
    
    setTimeout(() => {
        btn.innerText = originalText;
        btn.classList.remove('opacity-75');
        closeFormModal(); // Usar nuevo nombre
        alert('Registro guardado exitosamente');
    }, 1000);
} 

    </script>
</body>
</html>